<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{global/headData:: headData}"></th:block>

<body id="body">
<th:block th:replace="~{global/AlcoholHeader :: header}"></th:block>
<section class="user-dashboard page-wrapper">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        </ul>
        <div class="dashboard-wrapper dashboard-user-profile">
          <div class="media">
            <div class="container">
              <div class="row">
                <div class="col-md-12">
                  <div class="dashboard-wrapper user-dashboard">
                    <div class="table-responsive">
                      <table class="table">
                        <tr>
                          <th> </th>
                          <th>상품 이미지</th>
                          <th>상품명</th>
                          <th>가격</th>
                          <th>수량</th>
                          <th>바로 구매하기</th>
                          <th>장바구니 삭제</th>
                        </tr>
                        <tr th:each="cart : ${carts.result.content}">
                          <td>
                            <input type="checkbox">
                          </td>
                          <td>
                            <img th:src="${cart.itemImgUrl}" style="width: 3vw; height: 7vw">
                          </td>
                          <td th:text="${cart.itemName}"></td>
                          <td th:text="${cart.price}"></td>
                          <td th:text="${cart.amount}"></td>
                          <td><a href="#"
                                 th:href="@{/items/{itemId} (itemId=${cart.itemId})}"
                                 class="btn btn-default btn-asd">바로가기</a></td>
                          <td>
                            <form th:method="delete"
                                  th:action="@{/cart/items}">
                              <button type="submit" class="btn btn-default btn-asd">삭제
                              </button>
                            </form>
                          </td>
                        </tr>
                      </table>
                    </div>
                    <form method="delete" th:action="@{/cart/items}" th:object="${deleteCartItemRequestDTO}">
                      <input type="hidden" th:value="${carts.result.itemId}" th:field="*{deleteCartItemRequestDTO.itemIds}">
                      <input type="hidden"  id="amount2" class="form-control signin-input"  value="0" th:field="*{amount}" >
                      <input type="submit" class="btn btn-main mt-20" value="장바구니 추가">
                    </form>
                    <form method="post" th:action="@{/wish-list/{itemId} (itemId=${item.result.itemId})}" th:object="${addCartItemRequestDTO}">
                      <input type="submit" class="btn btn-main mt-20" value="찜하기">
                    </form>
                    <div th:if="${cart}">
                      <!-- 전역 변수 선언 -->
                      <nav th:with=" pageNumber = ${cart.pageable.pageNumber},
                                                pageSize = ${cart.pageable.pageSize},
                                                totalPages = ${cart.totalPages},
                                                startPage = ${T(java.lang.Math).floor(pageNumber / pageSize) * pageSize + 1},
                                                tempEndPage = ${startPage + pageSize - 1},
                                                endPage = (${tempEndPage < totalPages ? tempEndPage : totalPages})"
                           aria-label="Page navigation">
                        <ul class="pagination ">
                          <!-- 처음으로 이동 -->
                          <li th:classappend="${pageNumber < pageSize} ? 'disabled'"
                              class="page-item">
                            <a class="page-link" th:href="@{/items/cart/(page=0)}">
                              <span>&laquo;</span>
                              <span class="sr-only">First</span>
                            </a>
                          </li>

                          <!-- 이전으로 이동 -->
                          <li th:classappend="${cart.first} ? 'disabled'"
                              class="page-item">
                            <a class="page-link"
                               th:href="${cart.first} ? '#' : @{/items/cart/(page=${pageNumber - 1})}"
                               aria-label="Previous">
                              <span aria-hidden="true">&lt;</span>
                              <span class="sr-only">Previous</span>
                            </a>
                          </li>

                          <!-- 특정 페이지로 이동 -->
                          <li th:each="page: ${#numbers.sequence(startPage, endPage)}"
                              th:classappend="${page == pageNumber + 1} ? 'active'"
                              class="page-item">
                            <a th:text="${page}" class="page-link"
                               th:href="@{/items/cart/(page=${page - 1})}"></a>
                          </li>

                          <!-- 다음으로 이동 -->
                          <li th:classappend="${cart.last} ? 'disabled'"
                              class="page-item">
                            <a class="page-link"
                               th:href="${cart.last} ? '#' : @{/items/cart/(page=${pageNumber + 1})}"
                               aria-label="Next">
                              <span aria-hidden="true">&gt;</span>
                              <span class="sr-only">Next</span>
                            </a>
                          </li>

                          <!-- 마지막으로 이동 -->
                          <li th:classappend=" ${T(java.lang.Math).floor(totalPages / pageSize) * pageSize - 1 <= startPage} ? 'disabled'"
                              class="page-item">
                            <a class="page-link"
                               th:href="@{/items/cart/(page=${totalPages - 1})}">
                              <span>&raquo;</span>
                              <span class="sr-only">Last</span>
                            </a>
                          </li>
                        </ul>
                      </nav>
                    </div> <!-- /container -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Main jQuery -->
<script th:src="@{/plugins/jquery/dist/jquery.min.js}"></script>
<!-- Bootstrap 3.1 -->
<script th:src="@{/plugins/bootstrap/js/bootstrap.min.js}"></script>
<!-- Bootstrap Touchpin -->
<script th:src="@{/plugins/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js}"></script>
<!-- Instagram Feed Js -->
<script th:src="@{//instafeed/instafeed.min.js}"></script>
<!-- Video Lightbox Plugin -->
<script th:src="@{/plugins/ekko-lightbox/dist/ekko-lightbox.min.js}"></script>
<!-- Count Down Js -->
<script th:src="@{/plugins/syo-timer/build/jquery.syotimer.min.js}"></script>

<!-- slick Carousel -->
<script th:src="@{/plugins/slick/slick.min.js}"></script>
<script th:src="@{/plugins/slick/slick-animation.min.js}"></script>

<!-- Main Js File -->
<script th:src="@{/js/script.js}"></script>

<!-- Login Js File -->
<script th:src="@{/js/login-script.js}"></script>


</body>
</html>

